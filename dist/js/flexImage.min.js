/*
 * flexImage.js 1.0.0
 * https://github.com/YuTingtao/flexImage.js
 * description: 轻量级横向瀑布流插件，无依赖，兼容IE9以上，类似百度图片、谷歌图片展示效果
 * author: 735126858@qq.com
 * license: MIT
 */
!function(t,e){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof exports?module.exports=e():t.FlexImage=e()}(this,function(){var n={rowHeight:200,listenResize:!1,item:".fleximage-item",itemObject:"img"};function m(t){return window.getComputedStyle?getComputedStyle(t,null):t.currentStyle}function c(t){t=m(t);return(parseInt(t.marginLeft)||0)+(parseInt(t.marginRight)||0)+(Math.round(parseFloat(t.borderLeftWidth))||0)+(Math.round(parseFloat(t.borderRightWidth))||0)}function l(t,e,i,n){for(var r=parseInt(m(t).width),o=[],h=0,s=(i.rowHeight,0),l=0,a=0;a<e.length;a++){var u=e[a],d=u.querySelector(i.itemObject);if(itemDataW=parseInt(u.getAttribute("data-w")),itemWidth=itemDataW*(i.rowHeight/parseInt(u.getAttribute("data-h"))),u.style.float="left",u.style.width=itemWidth+"px",u.style.height=i.rowHeight+"px",d.style.width="100%",d.style.height="100%",o.push(u),s+=c(u),h+=itemWidth+c(u),a==e.length-1&&n(o),r<=h){for(var f=0,g=(r-s)/(h-s),p=Math.round(i.rowHeight*g),w=0;w<o.length;w++)(r<(f+=(l=Math.round(parseInt(o[w].style.width)*g))+c(o[w]))||f+o.length>r)&&(l-=f-r),o[w].style.width=l+"px",o[w].style.height=p+"px";o=[],h=s=0}}}function t(t,e){this.el=t,this.opt=function(t,e){for(var i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i]);return e}(n,e),this.lastRows=[],this.length=0;var i=this;setTimeout(function(){i.init()},50)}return t.prototype.init=function(){var e=this,t=this.el,i=this.opt,n=t.querySelectorAll(i.item);function r(t){e.lastRows=t}return this.length=n.length,l(t,n,i,r),i.listenResize&&window.addEventListener("resize",function(){setTimeout(function(){l(t,n,i,r),0},300)}),this},t.prototype.update=function(){var e=this,t=this.el,i=this.opt,n=t.querySelectorAll(i.item);if(n&&n.length>this.length){for(var r=this.lastRows,o=this.length;o<n.length;o++)r.push(n[o]);function h(t){e.lastRows=t}function s(){setTimeout(function(){l(t,n,i,h),0},300)}this.length=n.length,l(t,r,i,h),i.listenResize&&(window.removeEventListener("resize",s),window.addEventListener("resize",s))}return this},t});